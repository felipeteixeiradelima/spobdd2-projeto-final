{% extends "core/base.html" %}

{% block title %}Campanhas - Doe Vida{% endblock %}

{% block content %}

<div class="py-5">
  <section class="container m-auto bg-light">
    <header class="text-center mb-5">
      <h1 class="text-danger fw-bold">Campanhas de Doação</h1>
      <p class="lead">Veja nossas campanhas ativas e passadas — participe, compartilhe e salve vidas!</p>
    </header>

    <!-- TABELA DE CAMPANHAS -->
    <article class="bg-white p-4 rounded shadow-sm">
      <h2 class="h4 text-danger mb-3"><i class="bi bi-table"></i> Lista de Campanhas</h2>

      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle text-center">
          <thead class="table-danger">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Nome da Campanha</th>
              <th scope="col">Data Início</th>
              <th scope="col">Data Fim</th>
              <th scope="col">Status</th>
              <th scope="col">Ação</th>
            </tr>
          </thead>

        <tbody>
          {% if campanhas %}

            {% for c in campanhas %}
            <tr>
                <td scope="row">{{ c.id }}</td>
                <td>{{ c.nome }}</td>
                <td>{{ c.data_inicio|date:"d/m/Y" }}</td>
                <td>{{ c.data_fim|date:"d/m/Y" }}</td>
                <td>
                  {% if c.status.lower == "ativa" %}
                    <span class="badge bg-success">{{ c.status }}</span>
                  {% elif c.status.lower == "planejada" %}
                    <span class="badge bg-info">{{ c.status }}</span>
                  {% elif c.status.lower == "cancelada" %}
                    <span class="badge bg-danger">{{ c.status }}</span>
                  {% else %}
                    <span class="badge bg-dark">{{ c.status }}</span>
                  {% endif %}
                </td>
                <td>
                  <a href="{% url 'campanha_detail' c.id_campanha %}" class="btn btn-danger btn-sm gap-1 shadow-sm">
                    <i class="bi bi-calendar-heart-fill"></i>
                    Detalhes
                  </a>
                </td>
            </tr>
            {% endfor %}

          {% else %}

            <tr>
              <td colspan="5" class="text-center text-muted py-3">Não há campanhas disponíveis no momento.</td>
            </tr>

          {% endif %}
        </tbody>
        </table>
      </div>
    </article>

    <!-- TEXTO COMPLEMENTAR -->
    <section class="mt-5 text-center">
      <p class="lead">Quer ver sua cidade na próxima campanha?</p>
      <a href="{% url "agendamento" %}" class="btn btn-danger">
        <i class="bi bi-calendar2-heart"></i> Agende sua participação
      </a>
    </section>
  </section>
</div>

{% endblock %}
